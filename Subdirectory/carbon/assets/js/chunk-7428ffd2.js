(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7428ffd2"],{"48a6":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"View"},[s("van-notice-bar",{attrs:{mode:"closeable"}},[e._v("\n        可使用测试账号：13345678910，密码：password。自行注册请牢记密码，暂未提供忘记密码逻辑。\n    ")]),s("van-tabs",{staticClass:"tabs",attrs:{type:"card",color:"#42b983"},model:{value:e.actives,callback:function(t){e.actives=t},expression:"actives"}},[s("register",{on:{onFail:e.LoginFail}}),s("login",{on:{onFail:e.LoginFail}})],1)],1)},a=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-tab",{staticClass:"tab",attrs:{title:"注册"}},[s("div",{staticClass:"content"},[s("van-cell-group",[s("van-field",{attrs:{required:"",clearable:"",label:"用户名","right-icon":"question-o","error-message":e.error,placeholder:"请输入用户名"},on:{keyup:e.checkUp,"click-right-icon":function(t){return e.$toast("4-16字符，不得包含特殊字符")}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("van-field",{attrs:{required:"",clearable:"",label:"手机号","right-icon":"question-o",placeholder:"请填写手机号",type:"number","error-message":e.error1},on:{keyup:e.checkUp1,"click-right-icon":function(t){return e.$toast("仅支持11位中国大陆手机号码")}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),s("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码","error-message":e.error2,required:""},on:{keyup:e.checkUp2},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("van-field",{attrs:{type:"password",label:"确认密码",placeholder:"请再次输入密码",required:"","error-message":e.error3},on:{keyup:e.checkUp3},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}})],1),s("van-button",{ref:"RegisterNow",staticClass:"GOButton",attrs:{type:"primary",size:"large",disabled:e.RegisterDisabled},on:{click:e.RegisterButton}},[e._v("立即注册\n        ")])],1)])},n=[],i={name:"Register",data:function(){return{phone:"",username:"",password:"",password2:"",error:"",error1:"",error2:"",error3:"",RegisterDisabled:!0}},methods:{checkUp:function(){/^[a-zA-Z0-9_-]{4,16}$/.test(this.username)?this.error="":this.error="请检查用户名",this.Register()},checkUp1:function(){/^1[34578]\d{9}$/.test(this.phone)?this.error1="":this.error1="请使用正确的手机号码",this.Register()},checkUp2:function(){/^.*(?=.{6,}).*$/.test(this.password)?this.error2="":this.error2="密码格式错误",this.Register()},checkUp3:function(){this.password!=this.password2?this.error3="两次输入的密码不一样":this.error3="",this.Register()},Register:function(){this.username&&this.phone&&this.password&&this.password2&&this.error==this.error1==this.error2==this.error3?this.RegisterDisabled=!1:this.RegisterDisabled=!0},RegisterButton:function(){var e=this;this.$toast.loading({mask:!0,message:"正在注册...",duration:0}),this.$axios.get("https://www.apiopen.top/createUser?key=87a8c1780f1991fde5bfcc2136036b1b&phone="+this.phone+"&passwd="+this.password+"&name"+this.username).then(function(t){"成功!"==t.data.msg?(e.$store.dispatch("UpDataLoginStatus",!0),e.$store.dispatch("UpDataUserInfo",{username:e.username,phone:e.phone}),e.$router.push({path:"/user"}),e.$toast.loading({duration:1})):"用户已注册！"==t.data.msg&&e.DiaLog()}).catch(function(e){console.log(e)})},DiaLog:function(){var e=this;this.$toast.loading({duration:1}),this.$dialog.confirm({title:"用户已注册",message:"是否直接登录？"}).then(function(){e.$emit("onFail",1)})}}},c=i,l=(s("531d"),s("2877")),h=Object(l["a"])(c,o,n,!1,null,"6920b36c",null),u=h.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-tab",{staticClass:"tab",attrs:{title:"登录"}},[s("div",{staticClass:"content"},[s("van-cell-group",[s("van-field",{attrs:{required:"",clearable:"",label:"手机号","right-icon":"question-o",placeholder:"请填写手机号",type:"number","error-message":e.error1},on:{keyup:e.checkUp1,"click-right-icon":function(t){return e.$toast("注册时的11位中国大陆手机号码")}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),s("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码","error-message":e.error2,required:""},on:{keyup:e.checkUp2},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),s("van-button",{ref:"RegisterNow",staticClass:"GOButton",attrs:{type:"primary",size:"large",disabled:e.LoginDisabled},on:{click:e.LoginButton}},[e._v("立即登录\n        ")])],1)])},d=[],f=(s("7f7f"),{name:"Login",data:function(){return{phone:"",password:"",error1:"",error2:"",LoginDisabled:!0}},methods:{checkUp1:function(){/^1[34578]\d{9}$/.test(this.phone)?this.error1="":this.error1="请使用正确的手机号码",this.LoginCheck()},checkUp2:function(){/^.*(?=.{6,}).*$/.test(this.password)?this.error2="":this.error2="密码格式错误",this.LoginCheck()},LoginCheck:function(){this.phone&&this.password&&this.error1==this.error2?this.LoginDisabled=!1:this.LoginDisabled=!0},LoginButton:function(){var e=this;this.$toast.loading({mask:!0,message:"正在登录...",duration:0}),this.$axios.get("https://www.apiopen.top/login?key=87a8c1780f1991fde5bfcc2136036b1b&phone="+this.phone+"&passwd="+this.password).then(function(t){e.$toast.loading({duration:1}),"成功!"==t.data.msg?(e.$store.dispatch("UpDataLoginStatus",!0),console.log(t.data.name),e.$store.dispatch("UpDataUserInfo",{username:t.data.name?t.data.name:"Han09",phone:e.phone}),e.$router.push({path:"user"})):"用户不存在！"==t.data.msg?(e.$toast.fail({message:"用户不存在",duration:1500}),e.$emit("onFail",0)):"用户名或者密码错误！"==t.data.msg&&e.$toast.fail({message:"密码错误",duration:1500})})}}}),g=f,m=(s("d92f"),Object(l["a"])(g,p,d,!1,null,"95231efc",null)),b=m.exports,v={name:"RegisterOrLogin",components:{Login:b,Register:u},data:function(){return{actives:0}},methods:{LoginFail:function(e){this.actives=e}}},w=v,k=(s("ffe7"),Object(l["a"])(w,r,a,!1,null,"02c19426",null));t["default"]=k.exports},"531d":function(e,t,s){"use strict";var r=s("be94"),a=s.n(r);a.a},"7f7f":function(e,t,s){var r=s("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,n="name";n in a||s("9e1e")&&r(a,n,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},be94:function(e,t,s){},d92f:function(e,t,s){"use strict";var r=s("e6ba"),a=s.n(r);a.a},e6ba:function(e,t,s){},f6ff:function(e,t,s){},ffe7:function(e,t,s){"use strict";var r=s("f6ff"),a=s.n(r);a.a}}]);